@page "/authors/create"
@inject IAuthorService authorService
@inject NavigationManager navigationManager

<h3>Create</h3>
<EditForm FormName="author-create-form" Model="Author" OnValidSubmit="HandleCreateAuthor">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="email">First Name</label>
        <InputText class="form-control" @bind-Value="Author.FirstName" />
        <ValidationMessage For="@(() => Author.FirstName)" />
    </div>

    <div class="form-group">
        <label for="email">Last Name</label>
        <InputText class="form-control" @bind-Value="Author.LastName" />
        <ValidationMessage For="@(() => Author.LastName)" />
    </div>

    <div class="form-group">
        <label for="email">Bio</label>
        <InputText class="form-control" @bind-Value="Author.Bio" />
        <ValidationMessage For="@(() => Author.Bio)" />
    </div>


    <div class="mt-3">
        <button class="btn btn-outline-secondary btn-block" onclick="@(() => navigationManager.NavigateTo("/authors"))">
            <i class="bi bi-skip-backward-circle-fill px-2"></i>Back to List
        </button>

        <button type="submit" class="btn btn-primary btn-block">
            <i class="bi bi-file-plus-fill px-2"></i>Create Author
        </button>
    </div>
</EditForm>

@code {
    private AuthorCreateDto Author = new AuthorCreateDto();

    private async Task HandleCreateAuthor()
    {
        var response = await authorService.Create(Author);
        if (response.Success)
        {
            navigationManager.NavigateTo("/authors");
        }

    }


}
